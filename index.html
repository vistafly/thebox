<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Box | Fresno's Ultimate Throwback Party Band</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&display=swap">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Preconnect to Google Maps domains for faster iframe loading -->
    <link rel="preconnect" href="https://www.google.com">
    <link rel="preconnect" href="https://maps.googleapis.com">
    <link rel="preconnect" href="https://maps.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://www.google.com">
    <link rel="dns-prefetch" href="https://maps.googleapis.com">
</head>
<body>
    <!-- Loading Screen -->
    <div class="loader">
        <div class="loader-content">
            <div class="logo-reveal">
                <svg viewBox="0 0 200 100" class="logo-svg">
                    <path class="logo-path" d="M20,50 L50,20 L80,50 L50,80 Z" stroke="#61F457" fill="none"/>
                    <text x="100" y="60" class="logo-text">THE BOX</text>
                </svg>
            </div>
            <div class="progress-bar">
                <div class="progress-fill"></div>
            </div>
        </div>
    </div>

<header class="header">
    <div class="nav-container">
        <!-- Mobile Logo -->
        <div class="logo-mobile">
            <img src="images/logo.png" alt="The Box Logo">
        </div>
        
        <nav class="nav">
    <a href="#hero" class="nav-link">
        <span class="nav-text">Home</span>
        <svg class="nav-hover" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="trace-path" d="M0,0 L100,0 L100,100 L0,100 L0,0" />
        </svg>
    </a>
        <a href="#tour" class="nav-link">
        <span class="nav-text">Gigs</span>
        <svg class="nav-hover" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="trace-path" d="M0,0 L100,0 L100,100 L0,100 L0,0" />
        </svg>
    </a>
    <a href="#about" class="nav-link">
        <span class="nav-text">About</span>
        <svg class="nav-hover" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="trace-path" d="M0,0 L100,0 L100,100 L0,100 L0,0" />
        </svg>
    </a>
    <a href="#music" class="nav-link">
        <span class="nav-text">Music</span>
        <svg class="nav-hover" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="trace-path" d="M0,0 L100,0 L100,100 L0,100 L0,0" />
        </svg>
    </a>
    <a href="#members" class="nav-link">
        <span class="nav-text">Members</span>
        <svg class="nav-hover" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="trace-path" d="M0,0 L100,0 L100,100 L0,100 L0,0" />
        </svg>
    </a>
    <a href="#booking" class="nav-link">
        <span class="nav-text">Booking</span>
        <svg class="nav-hover" viewBox="0 0 100 100" preserveAspectRatio="none">
            <path class="trace-path" d="M0,0 L100,0 L100,100 L0,100 L0,0" />
        </svg>
    </a>
</nav>
        <div class="menu-toggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>
</header>

    <section id="hero" class="hero">
        <div class="hero-background">
            <video autoplay muted loop playsinline>
                <source src="images/hero.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
            <div class="bg-grid"></div>
            <div class="bg-particles"></div>
            <div class="bg-gradient"></div>
            <div class="bg-noise"></div>
            <div class="light-effect"></div>
        </div>
        
        <div class="hero-content">
            <!-- Desktop Logo -->
            <div class="logo-desktop">
                <img src="images/logo.png" alt="The Box Logo">
            </div>
            </div>
        </div>
    
    <div class="scroll-indicator">
        <div class="scroll-line"></div>
        <span class="scroll-text">Explore</span>
    </div>
</section>

<!-- Tour Dates Section -->
<div id="tour" class="tour-section">
    <h2 class="section-title">Where to find us</h2>
            <div class="section-line"></div>

    <!-- View Toggle Controls -->
    <div class="tour-view-controls">
        <button class="view-toggle-btn active" data-view="list">
            <i class="fas fa-list"></i> List View
        </button>
        <button class="view-toggle-btn" data-view="calendar">
            <i class="fas fa-calendar-alt"></i> Calendar View
        </button>
    </div>

    <!-- Calendar View (hidden by default) -->
    <div class="tour-calendar-view" style="display: none;">
        <div class="calendar-header">
            <button class="calendar-nav-btn prev-month">
                <i class="fas fa-chevron-left"></i>
            </button>
            <h3 class="calendar-month-year"></h3>
            <button class="calendar-nav-btn next-month">
                <i class="fas fa-chevron-right"></i>
            </button>
        </div>
        <div class="calendar-grid">
            <div class="calendar-weekdays">
                <div class="weekday">Sun</div>
                <div class="weekday">Mon</div>
                <div class="weekday">Tue</div>
                <div class="weekday">Wed</div>
                <div class="weekday">Thu</div>
                <div class="weekday">Fri</div>
                <div class="weekday">Sat</div>
            </div>
            <div class="calendar-days"></div>
        </div>

        <!-- Shared Popup -->
        <div class="calendar-event-popup" id="calendar-popup"></div>
    </div>

    <!-- List View (default) -->
    <div class="tour-grid">
        <!-- Tour Date 1 (Highlighted) -->
        <article class="tour-date">
            <div class="date" aria-label="July 31">
                <time datetime="2025-08-01">
                    <span class="month">AUG</span>
                    <span class="day">1</span>
                </time>
            </div>
            
            <div class="info">
                <div class="venue-header">
                    <h3>School House</h3>
                    <span class="venue-promo">Restaurant & Tavern</span>
                </div>
                <p class="venue-desc"> Enjoy some great food!</p>
                <div class="event-meta">
                    <span class="event-time">7:00PM - 10:00PM</span>
                    <span class="event-age">All Ages</span>
                </div>
                <address class="venue-address">1018 S Frankwood Ave, Sanger</address>
                
                <div class="venue-map-container">
                    <iframe class="lazy-map"
                            data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3197.093104097319!2d-119.45057992426812!3d36.71962497227001!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8094fe45c380ad37%3A0xf26f96d9e9286007!2sSchool%20House%20Restaurant%20%26%20Tavern!5e0!3m2!1sen!2sus!4v1719529371239!5m2!1sen!2sus"
                            aria-label="Map location of School House Restaurant & Tavern"
                            loading="lazy"
                            style="border:0" allowfullscreen></iframe>
                </div>
            </div>

        </article>
        <!-- Tour Date 2 -->
         <article class="tour-date">
            <div class="date" aria-label="July 25">
                <time datetime="2025-08-02">
                    <span class="month">AUG</span>
                    <span class="day">2</span>
                </time>
            </div>
            
            <div class="info">
            <div class="venue-header">
                <h3>Station 48</h3>
                <span class="venue-promo">Restaurant & Bar</span>
            </div>
            <p class="venue-desc">An old volunteer fire station transfromed into a pub</p>
            <div class="event-meta">
                <span class="event-time">7:00PM - 9:00PM</span>
                <span class="event-age">All Ages</span>
            </div>
            <address class="venue-address">1279 N Wishon Ave, Fresno</address>
            
            <div class="venue-map-container">
                <iframe class="lazy-map"
                        data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3197.093104097319!2d-119.45057992426812!3d36.71962497227001!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8094f11d4930edf5%3A0x31b25aa2cbb059e9!2sRileys%20Brewing%20Taproom!5e0!3m2!1sen!2sus!4v1719529371239!5m2!1sen!2sus"
                        aria-label="Map location of Station 48"
                        loading="lazy"
                        style="border:0" allowfullscreen></iframe>
            </div>
        </div>
        </article>

        <!-- Tour Date 3 -->
        <article class="tour-date">
            <div class="date" aria-label="July 25">
                <time datetime="2025-08-06">
                    <span class="month">AUG</span>
                    <span class="day">6</span>
                </time>
            </div>
            
            <div class="info">
            <div class="venue-header">
                <h3>Rileys Brewing Taproom</h3>
                <span class="venue-promo">Restaurant & Bar</span>
            </div>
            <p class="venue-desc">45 beers on tap & a lineup of live music.</p>
            <div class="event-meta">
                <span class="event-time">6:30PM - 8:30PM</span>
                <span class="event-age">All Ages</span>
            </div>
            <address class="venue-address">2940 McCall Ave STE 112, Selma</address>
            
            <div class="venue-map-container">
                <iframe class="lazy-map"
                        data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3197.093104097319!2d-119.45057992426812!3d36.71962497227001!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8094f11d4930edf5%3A0x31b25aa2cbb059e9!2sRileys%20Brewing%20Taproom!5e0!3m2!1sen!2sus!4v1719529371239!5m2!1sen!2sus"
                        aria-label="Map location of Rileys Brewing Taproom"
                        loading="lazy"
                        style="border:0" allowfullscreen></iframe>
            </div>
        </div>
        </article>

       <!-- Tour Date 4 -->
<article class="tour-date">
    <div class="date" aria-label="July 26">
        <time datetime="2025-08-08">
            <span class="month">AUG</span>
            <span class="day">8</span>
        </time>
    </div>
    
    <div class="info">
        <div class="venue-header">
            <h3>Howlin Wolf</h3>
            <span class="venue-promo">Bar & Lounge</span>
        </div>
        <p class="venue-desc">Visit the nicest bar in tower</p>
        <div class="event-meta">
            <span class="event-time">9:00PM - 11:00PM</span>
            <span class="event-age">21+</span>
        </div>
        <address class="venue-address">920 E Olive Ave, Fresno</address>
        
        <div class="venue-map-container">
            <iframe class="lazy-map"
                    data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3195.469246341038!2d-119.8024274!3d36.7572347!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80946713cb56fcb9%3A0xfbfcadc49a354757!2sHowlin%20Wolf!5e0!3m2!1sen!2sus!4v1719529371239!5m2!1sen!2sus"
                    aria-label="Map location of Howlin Wolf"
                    loading="lazy"
                    style="border:0" allowfullscreen></iframe>
        </div>
    </div>
</article>

        <!-- Tour Date 5 -->
<article class="tour-date">
    <div class="date" aria-label="Date">
        <time datetime="2025-08-14">
            <span class="month">AUG</span>
            <span class="day">14</span>
        </time>
    </div>
    
    <div class="info">
        <div class="venue-header">
            <h3>School House</h3>
            <span class="venue-promo">Restaurant & Tavern</span>
        </div>
        <p class="venue-desc">Have a beer and eat some food</p>
        <div class="event-meta">
            <span class="event-time">5:00PM - 7:00PM</span>
            <span class="event-age">All Ages</span>
        </div>
        <address class="venue-address">1018 S Frankwood Ave, Sanger</address>
        
        <div class="venue-map-container">
            <iframe class="lazy-map"
                    data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3197.373315168003!2d-119.4505746!3d36.719625!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8094fe45c380ad37%3A0xf26f96d9e9286007!2sSchool%20House%20Restaurant%20%26%20Tavern!5e0!3m2!1sen!2sus!4v1719791234567!5m2!1sen!2sus"
                    aria-label="Map location of School House Restaurant & Tavern"
                    loading="lazy"
                    style="border:0" allowfullscreen></iframe>
        </div>
    </div>
</article>

<!-- Tour Date 6 -->
<article class="tour-date">
    <div class="date" aria-label="Date">
        <time datetime="2025-08-15">
            <span class="month">AUG</span>
            <span class="day">15</span>
        </time>
    </div>
    
    <div class="info">
        <div class="venue-header">
            <h3>Lush Fine Wines</h3>
            <span class="venue-promo">Wine bar and lounge</span>
        </div>
        <p class="venue-desc">Premiere wine and beer destination</p>
        <div class="event-meta">
            <span class="event-time">8:00PM - 10:00PM</span>
            <span class="event-age">21+</span>
        </div>
        <address class="venue-address">202 W Lacey Blvd, Hanford</address>
        
        <div class="venue-map-container">
            <iframe class="lazy-map"
                    data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3204.072422944247!2d-119.6480048!3d36.3281407!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8094c378f0be37b5%3A0xa42f8f372f65ab74!2sLush%20Fine%20Wines!5e0!3m2!1sen!2sus!4v1719791234567!5m2!1sen!2sus"
                    aria-label="Map location of Lush Fine Wines"
                    loading="lazy"
                    style="border:0" allowfullscreen></iframe>
        </div>
    </div>
</article>

<!-- Tour Date 7 -->
<article class="tour-date">
    <div class="date" aria-label="Date">
        <time datetime="2025-08-16">
            <span class="month">AUG</span>
            <span class="day">16</span>
        </time>
    </div>
    
    <div class="info">
        <div class="venue-header">
            <h3>YFC Blackstone</h3>
            <span class="venue-promo">Restaurant & Dinner</span>
        </div>
        <p class="venue-desc">Serving steak, seafood & sandwiches </p>
        <div class="event-meta">
            <span class="event-time">8:30PM - 11:15PM</span>
            <span class="event-age">All Ages</span>
        </div>
        <address class="venue-address">5123 N Blackstone Ave, Fresno</address>
        
        <div class="venue-map-container">
            <iframe class="lazy-map"
                    data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3197.123389042784!2d-119.7908477!3d36.8105163!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8094678a4087a765%3A0xfa2e1092252670f1!2sYosemite%20Falls%20Cafe%20-%20Blackstone!5e0!3m2!1sen!2sus!4v1711920000000!5m2!1sen!2sus"
                    aria-label="Map location of Yosemite Falls Cafe"
                    loading="lazy"
                    style="border:0" allowfullscreen></iframe>
        </div>
    </div>
</article>

<!-- Tour Date 8 -->
<article class="tour-date">
    <div class="date" aria-label="Date">
        <time datetime="2025-08-17">
            <span class="month">AUG</span>
            <span class="day">17</span>
        </time>
    </div>
    
    <div class="info">
        <div class="venue-header">
            <h3>Lucy's</h3>
            <span class="venue-promo">Cocktail Lounge</span>
        </div>
        <p class="venue-desc">Handcrafted cocktails</p>
        <div class="event-meta">
            <span class="event-time">3:30PM - 6:30PM</span>
            <span class="event-age">21+</span>
        </div>
        <address class="venue-address">733 E Olive Ave, Fresno</address>
        
        <div class="venue-map-container">
            <iframe class="lazy-map"
                    data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3198.902658050146!2d-119.8052759!3d36.7578575!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8094674e658456e7%3A0x75d88bb50740ff08!2sLucy%27s%20Lounge!5e0!3m2!1sen!2sus!4v1711920000000!5m2!1sen!2sus"
                    aria-label="Map location of Lucy's Lounge"
                    loading="lazy"
                    style="border:0" allowfullscreen></iframe>
        </div>
    </div>
</article>

<!-- Tour Date 9 -->
<article class="tour-date">
    <div class="date" aria-label="Date">
        <time datetime="2025-08-27">
            <span class="month">AUG</span>
            <span class="day">27</span>
        </time>
    </div>
    
    <div class="info">
        <div class="venue-header">
            <h3>Fowler Farmers Market</h3>
            <span class="venue-promo">Local Flavors Market</span>
        </div>
        <p class="venue-desc">Stop by and get some food</p>
        <div class="event-meta">
            <span class="event-time">6:00PM - 9:00PM</span>
            <span class="event-age">All Ages</span>
        </div>
        <address class="venue-address"> 500 E. Merced St., Fowler</address>
        
        <div class="venue-map-container">
            <iframe class="lazy-map"
                    data-src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3193.908721968595!2d-119.6781983!3d36.6334367!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8094f6b5cc0d26b3%3A0x495a005fe8f26db1!2sPanzak%20Park!5e0!3m2!1sen!2sus!4v1711920000000!5m2!1sen!2sus"
                    aria-label="Map location of Fowler Farmers Market"
                    loading="lazy"
                    style="border:0" allowfullscreen></iframe>
        </div>
    </div>
</article>

    </div>
</div>

    <!-- Tour Booking Modal -->
    <div id="tourBookingModal" class="tour-booking-modal">
        <div class="tour-booking-modal-backdrop"></div>
        <div class="tour-booking-modal-container">
            <button type="button" class="tour-booking-modal-close" aria-label="Close booking modal">&times;</button>

            <div class="tour-booking-modal-header">
                <h3>Book The Box</h3>
                <p class="tour-booking-selected-date">Selected date: <strong id="modalSelectedDate">-</strong></p>
            </div>

            <div class="tour-booking-modal-content">
                <!-- Progress Steps -->
                <div class="modal-booking-progress-steps">
                    <div class="modal-booking-step active" data-step="1">
                        <span class="modal-booking-step-number">1</span>
                        <span class="modal-booking-step-label">Time</span>
                    </div>
                    <div class="modal-booking-step-divider"></div>
                    <div class="modal-booking-step" data-step="2">
                        <span class="modal-booking-step-number">2</span>
                        <span class="modal-booking-step-label">Contact</span>
                    </div>
                    <div class="modal-booking-step-divider"></div>
                    <div class="modal-booking-step" data-step="3">
                        <span class="modal-booking-step-number">3</span>
                        <span class="modal-booking-step-label">Details</span>
                    </div>
                </div>

                <!-- Step 1: Duration & Time -->
                <div class="modal-form-step active" id="modalStep1">
                    <label class="modal-section-label">Event Duration (Hours) *</label>
                    <div class="modal-duration-row">
                        <div class="modal-duration-quick">
                            <button type="button" class="modal-duration-btn" data-duration="2">2 hrs</button>
                            <button type="button" class="modal-duration-btn" data-duration="3">3 hrs</button>
                            <button type="button" class="modal-duration-btn" data-duration="4">4 hrs</button>
                            <button type="button" class="modal-duration-btn" data-duration="6">6 hrs</button>
                        </div>
                        <div class="modal-duration-divider"><span>or</span></div>
                        <div class="modal-duration-input-wrapper">
                            <input type="number" id="modalDurationInput" class="modal-duration-input" placeholder="Custom" min="1" max="12" step="0.5">
                            <span class="modal-duration-unit">hrs</span>
                        </div>
                    </div>

                    <div class="modal-timeslot-section hidden" id="modalTimeslotSection">
                        <label class="modal-section-label">Select Start Time *</label>
                        <div class="modal-timeslot-loading hidden" id="modalTimeslotLoading">Choose an event duration to show available timeslots</div>
                        <div class="modal-timeslot-grid" id="modalTimeslotGrid"></div>
                    </div>

                    <div class="modal-form-actions">
                        <button type="button" class="modal-btn modal-btn-primary" id="modalContinueToContact" disabled>Continue to Contact Info</button>
                    </div>
                </div>

                <!-- Step 2: Contact Info -->
                <div class="modal-form-step" id="modalStep2">
                    <div class="modal-form-grid">
                        <div class="modal-form-group full-width">
                            <label for="modalContactName">Contact Name *</label>
                            <input type="text" id="modalContactName" class="modal-form-input" placeholder="Your name">
                            <span class="modal-error-message"></span>
                        </div>
                        <div class="modal-form-group">
                            <label for="modalContactPhone">Phone Number</label>
                            <input type="tel" id="modalContactPhone" class="modal-form-input" placeholder="(555) 123-4567">
                            <span class="modal-error-message"></span>
                        </div>
                        <div class="modal-form-group">
                            <label for="modalContactEmail">Email Address</label>
                            <input type="email" id="modalContactEmail" class="modal-form-input" placeholder="your@email.com">
                            <span class="modal-error-message"></span>
                        </div>
                    </div>
                    <p class="modal-contact-note">Please provide at least one contact method (phone or email).</p>

                    <div class="modal-form-actions">
                        <button type="button" class="modal-btn modal-btn-secondary" id="modalBackToTime">Back</button>
                        <button type="button" class="modal-btn modal-btn-primary" id="modalContinueToDetails">Continue to Event Details</button>
                    </div>
                </div>

                <!-- Step 3: Event Details -->
                <div class="modal-form-step" id="modalStep3">
                    <div class="modal-form-grid">
                        <div class="modal-form-group full-width">
                            <label for="modalEventType">Event Type *</label>
                            <select id="modalEventType" class="modal-form-input">
                                <option value="">Select event type</option>
                                <option value="Wedding">Wedding</option>
                                <option value="Corporate Event">Corporate Event</option>
                                <option value="Private Party">Private Party</option>
                                <option value="Festival">Festival</option>
                                <option value="Bar/Club">Bar/Club</option>
                                <option value="Birthday Party">Birthday Party</option>
                                <option value="Anniversary">Anniversary</option>
                                <option value="Other">Other</option>
                            </select>
                            <span class="modal-error-message"></span>
                        </div>
                        <div class="modal-form-group full-width">
                            <label for="modalVenueName">Venue Name *</label>
                            <input type="text" id="modalVenueName" class="modal-form-input" placeholder="Venue name">
                            <span class="modal-error-message"></span>
                        </div>
                        <div class="modal-form-group full-width">
                            <label for="modalVenueAddress">Venue Address *</label>
                            <input type="text" id="modalVenueAddress" class="modal-form-input" placeholder="Full venue address">
                            <span class="modal-error-message"></span>
                        </div>
                        <div class="modal-form-group">
                            <label for="modalAttendance">Expected Attendance</label>
                            <input type="number" id="modalAttendance" class="modal-form-input" placeholder="100" min="1">
                        </div>
                        <div class="modal-form-group">
                            <label for="modalBudget">Budget Range</label>
                            <select id="modalBudget" class="modal-form-input">
                                <option value="">Select budget</option>
                                <option value="Under $1,000">Under $1,000</option>
                                <option value="$1,000 - $2,500">$1,000 - $2,500</option>
                                <option value="$2,500 - $5,000">$2,500 - $5,000</option>
                                <option value="$5,000+">$5,000+</option>
                                <option value="Prefer to discuss">Prefer to discuss</option>
                            </select>
                        </div>
                        <div class="modal-form-group full-width">
                            <label for="modalDescription">Event Description *</label>
                            <textarea id="modalDescription" class="modal-form-input" rows="3" placeholder="Tell us about your event, music preferences, special requests..."></textarea>
                            <span class="modal-error-message"></span>
                        </div>
                    </div>

                    <div class="modal-form-actions">
                        <button type="button" class="modal-btn modal-btn-secondary" id="modalBackToContact">Back</button>
                        <button type="button" class="modal-btn modal-btn-primary" id="modalSubmit">Submit Booking Request</button>
                    </div>
                </div>

                <!-- Success State -->
                <div class="modal-form-step modal-success-state" id="modalSuccessState">
                    <div class="modal-success-icon">
                        <svg width="64" height="64" viewBox="0 0 64 64" fill="none"><circle cx="32" cy="32" r="32" fill="#61F457"/><path d="M20 32L28 40L44 24" stroke="#0a0a0a" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </div>
                    <h2>Booking Request Submitted!</h2>
                    <p class="modal-success-message">We've received your booking request for <strong id="modalSuccessDate">-</strong>.</p>
                    <p class="modal-success-note">We'll review your request and get back to you within 24 hours.</p>
                    <button type="button" class="modal-btn modal-btn-primary" id="modalClose">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- About Section -->
    <section id="about" class="section about-section">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">About</h2>
                <div class="section-line"></div>
            </div>
            
            <div class="about-content">
    <div class="about-text">
        <div class="text-block">
            <!-- DESKTOP TEXT (visible by default) -->
            <p class="desktop-version">
                The Box is a high-energy band from Fresno, California that brings the party to life with electrifying performances of Hip Hop, R&B, Soul, Dance, Pop and more. We combine DJ-style transitions with the raw power of a live band, specializing in 90s-2000s hits while effortlessly spanning genres and eras. Our dynamic shows ignite dance floors and create unforgettable experiences for every crowd.
            </p>
            
            <!-- MOBILE TEXT (hidden by default) -->
            <p class="mobile-version">
                The Box is a high-energy band from Fresno specializing in 90s-2000s hits. We combine DJ-style transitions with live band power to ignite dance floors and create unforgettable experiences.
            </p>
        </div>
    </div>
                
                <div class="about-stats">
                    <div class="stat-item">
                        <span class="stat-number">500+</span>
                        <span class="stat-label">Shows Performed</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">10+</span>
                        <span class="stat-label">Years Experience</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-number">∞</span>
                        <span class="stat-label">Energy Level</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Music Player Section -->
<section id="music" class="section music-section">
    <div class="section-header">
        <h2 class="section-title">Box's Music</h2>
        <div class="section-line"></div>
    </div>

   <!-- Slideshow Container -->
<div class="slideshow-container">
    <div class="slideshow">
        <div class="slide active">
            <img src="images/slide1.jpg" alt="Music Visual 1">
        </div>
        <div class="slide">
            <img src="images/slide2.jpg" alt="Music Visual 2">
        </div>
        <div class="slide">
            <img src="images/slide3.jpg" alt="Music Visual 3">
        </div>
        <div class="slide">
            <img src="images/slide4.jpg" alt="Music Visual 4">
        </div>
        <div class="slide">
            <img src="images/slide5.jpg" alt="Music Visual 5">
        </div>
        <div class="slide">
            <img src="images/slide6.jpg" alt="Music Visual 6">
        </div>
    </div>
    <div class="slideshow-controls">
        <button class="slideshow-prev">❮</button>
        <div class="slideshow-dots">
            <span class="dot active" data-index="0"></span>
            <span class="dot" data-index="1"></span>
            <span class="dot" data-index="2"></span>
            <span class="dot" data-index="3"></span>
            <span class="dot" data-index="4"></span>
            <span class="dot" data-index="5"></span>
        </div>
        <button class="slideshow-next">❯</button>
    </div>
</div>

    <!-- Music Player -->
    <div class="music-player">
        <div class="player-container">
            <div class="player-controls">
                <button class="control-btn prev-btn">
                    <svg viewBox="0 0 24 24"><path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"/></svg>
                </button>
                <button class="control-btn play-btn">
                    <svg class="play-icon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
                    <svg class="pause-icon" viewBox="0 0 24 24" style="display: none;"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>
                </button>
                <button class="control-btn next-btn">
                    <svg viewBox="0 0 24 24"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
                </button>
                
                <div class="volume-control">
                    <button class="volume-btn">
                        <svg class="volume-high" viewBox="0 0 24 24">
                            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                        </svg>
                        <svg class="volume-low" viewBox="0 0 24 24" style="display:none;">
                            <path d="M18.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM5 9v6h4l5 5V4L9 9H5z"/>
                        </svg>
                        <svg class="volume-mute" viewBox="0 0 24 24" style="display:none;">
                            <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                        </svg>
                    </button>
                    <input type="range" class="volume-slider" min="0" max="1" step="0.01" value="0.7">
                </div>
            </div>
            
            <div class="progress-container">
                <input type="range" class="progress-slider" min="0" max="100" step="0.1" value="0">
            </div>
            
            <div class="track-info">
                <div class="track-details">
                    <span class="track-title">Throwback Party Mix</span>
                    <span class="track-artist">The Box</span>
                </div>
                <div class="track-time">
                    <span class="current-time">0:00</span>
                    <span class="total-time">3:45</span>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Members Background (fixed, controlled by JS) -->
<div class="members-background">
    <video autoplay muted loop playsinline>
        <source src="images/hero.mp4" type="video/mp4">
    </video>
    <div class="bg-grid"></div>
    <div class="bg-particles"></div>
    <div class="bg-gradient"></div>
    <div class="bg-noise"></div>
</div>

<!-- Members Section - Horizontal Scroll -->
<section id="members" class="band-showcase-section">
    <div class="band-showcase-wrapper">
        <div class="band-showcase-track">
            <!-- Alejo Delgado - Bass -->
            <div class="showcase-panel showcase-member">
                <img src="images/artists/alejo.png" class="showcase-artist" alt="Alejo Delgado"/>
                <div class="showcase-member-info">
                    <h3 class="showcase-member-name">Alejo Delgado</h3>
                    <p class="showcase-member-role">Bass</p>
                    <p class="showcase-member-bio">Bringing the low-end foundation with years of groove experience</p>
                </div>
            </div>

            <!-- Christopher Reyes - Drums -->
            <div class="showcase-panel showcase-member">
                <img src="images/artists/reyes.png" class="showcase-artist" alt="Christopher Reyes"/>
                <div class="showcase-member-info">
                    <h3 class="showcase-member-name">Christopher Reyes</h3>
                    <p class="showcase-member-role">Drums</p>
                    <p class="showcase-member-bio">The heartbeat of The Box, keeping the rhythm tight and the crowd moving</p>
                </div>
            </div>

            <!-- Hope Garcia - Vocals -->
            <div class="showcase-panel showcase-member">
                <img src="images/artists/hope.png" class="showcase-artist" alt="Hope Garcia"/>
                <div class="showcase-member-info">
                    <h3 class="showcase-member-name">Hope Garcia</h3>
                    <p class="showcase-member-role">Vocals</p>
                    <p class="showcase-member-bio">The voice that brings every throwback hit to life with soul and power</p>
                </div>
            </div>

            <!-- Fernando Jimenez - Guitar -->
            <div class="showcase-panel showcase-member">
                <img src="images/artists/fern.png" class="showcase-artist" alt="Fernando Jimenez"/>
                <div class="showcase-member-info">
                    <h3 class="showcase-member-name">Fernando Jimenez</h3>
                    <p class="showcase-member-role">Guitar</p>
                    <p class="showcase-member-bio">Crafting the perfect riffs and leads that define our signature sound</p>
                </div>
            </div>

            <!-- Ian Garoian - Keys -->
            <div class="showcase-panel showcase-member">
                <img src="images/artists/ian.png" class="showcase-artist" alt="Ian Garoian"/>
                <div class="showcase-member-info">
                    <h3 class="showcase-member-name">Ian Garoian</h3>
                    <p class="showcase-member-role">Keys</p>
                    <p class="showcase-member-bio">Adding the harmonic complexity that brings depth to every performance</p>
                </div>
            </div>
        </div>
    </div>
</section>

    <!-- Booking Section -->
    <section id="booking" class="section booking-section">
        <div class="section-header">
            <h2 class="section-title">Book The Box</h2>
            <div class="section-line"></div>
            <p class="booking-intro">From corporate events to private parties, weddings to festivals - we bring the energy that transforms any gathering into an unforgettable experience.</p>
        </div>

        <div class="booking-layout">
            <!-- Contact Sidebar -->
            <aside class="booking-sidebar">
                <div class="contact-methods">
                    <h3>Quick Contact</h3>
                    <a href="mailto:booking@thebox.band" class="contact-card email-card">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg>
                        </div>
                        <div class="contact-info">
                            <span class="contact-label">Email</span>
                            <span class="contact-value">booking@thebox.band</span>
                        </div>
                    </a>

                    <a href="tel:5599172975" class="contact-card phone-card">
                        <div class="contact-icon">
                            <svg viewBox="0 0 24 24"><path d="M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z"/></svg>
                        </div>
                        <div class="contact-info">
                            <span class="contact-label">Phone</span>
                            <span class="contact-value">(559) 917-2975</span>
                        </div>
                    </a>
                </div>
            </aside>

            <!-- Inline Booking Form -->
            <div class="booking-form-inline">
                <!-- Progress Steps -->
                <div class="booking-progress-steps" id="progressSteps">
                    <div class="booking-step active" data-step="1">
                        <span class="booking-step-number">1</span>
                        <span class="booking-step-label">Date & Time</span>
                    </div>
                    <div class="booking-step-divider"></div>
                    <div class="booking-step" data-step="2">
                        <span class="booking-step-number">2</span>
                        <span class="booking-step-label">Contact Info</span>
                    </div>
                    <div class="booking-step-divider"></div>
                    <div class="booking-step" data-step="3">
                        <span class="booking-step-number">3</span>
                        <span class="booking-step-label">Event Details</span>
                    </div>
                </div>

                <!-- Booking Form -->
                <form id="bookingForm" class="inline-booking-form">
                    <!-- Step 1: Date/Time Selection -->
                    <div class="booking-form-step active" id="step1">
                        <div class="booking-step-content">
                            <!-- Month Navigation -->
                            <div class="booking-calendar-header">
                                <button type="button" class="booking-month-nav-btn" id="prevMonth" disabled>
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                </button>
                                <div class="booking-month-selector">
                                    <button type="button" id="currentMonthBtn" class="booking-current-month-btn">
                                        <span id="currentMonthLabel">Loading...</span>
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M4 6L8 10L12 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                    </button>
                                    <div class="booking-month-dropdown hidden" id="monthDropdown"></div>
                                </div>
                                <button type="button" class="booking-month-nav-btn" id="nextMonth">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M7.5 15L12.5 10L7.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                </button>
                            </div>

                            <!-- Calendar Grid -->
                            <div class="booking-calendar-grid">
                                <div class="booking-calendar-weekdays">
                                    <div class="booking-weekday">Sun</div>
                                    <div class="booking-weekday">Mon</div>
                                    <div class="booking-weekday">Tue</div>
                                    <div class="booking-weekday">Wed</div>
                                    <div class="booking-weekday">Thu</div>
                                    <div class="booking-weekday">Fri</div>
                                    <div class="booking-weekday">Sat</div>
                                </div>
                                <div class="booking-calendar-days" id="calendarDays"></div>
                            </div>

                            <!-- Duration Selection -->
                            <div class="booking-duration-section hidden" id="durationSection">
                                <label class="booking-section-label">Event Duration (Hours) *</label>
                                <div class="booking-duration-row">
                                    <div class="booking-duration-quick">
                                        <button type="button" class="booking-duration-btn" data-duration="2">2 hrs</button>
                                        <button type="button" class="booking-duration-btn" data-duration="3">3 hrs</button>
                                        <button type="button" class="booking-duration-btn" data-duration="4">4 hrs</button>
                                        <button type="button" class="booking-duration-btn" data-duration="6">6 hrs</button>
                                    </div>
                                    <div class="booking-duration-divider">
                                        <span>or</span>
                                    </div>
                                    <div class="booking-duration-input-wrapper">
                                        <input
                                            type="number"
                                            id="durationInput"
                                            class="booking-duration-input"
                                            placeholder="Custom"
                                            min="1"
                                            max="12"
                                            step="0.5"
                                            inputmode="decimal"
                                        >
                                        <span class="booking-duration-unit">hrs</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Time Slot Selection -->
                            <div class="booking-timeslot-section hidden" id="timeslotSection">
                                <label class="booking-section-label">Select Time</label>
                                <div class="booking-timeslot-loading hidden" id="timeslotLoading">
                                    <div class="booking-spinner"></div>
                                    <p>Loading available times...</p>
                                </div>
                                <div class="booking-timeslot-grid" id="timeslotGrid"></div>
                            </div>

                            <div class="booking-form-actions">
                                <button type="button" class="booking-btn booking-btn-primary" id="continueToContact" disabled>
                                    Continue to Contact Info
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 2: Contact Info -->
                    <div class="booking-form-step" id="step2">
                        <div class="booking-step-content">
                            <div class="booking-form-grid">
                                <div class="booking-form-group full-width">
                                    <label for="contactName">Contact Name *</label>
                                    <input type="text" id="contactName" name="contactName" class="booking-form-input" placeholder="John Doe" required>
                                    <span class="booking-error-message"></span>
                                </div>

                                <div class="booking-form-group">
                                    <label for="contactPhone">Phone Number</label>
                                    <input type="tel" id="contactPhone" name="contactPhone" class="booking-form-input" placeholder="(555) 123-4567">
                                    <span class="booking-error-message"></span>
                                </div>

                                <div class="booking-form-group">
                                    <label for="contactEmail">Email Address</label>
                                    <input type="email" id="contactEmail" name="contactEmail" class="booking-form-input" placeholder="john@example.com">
                                    <span class="booking-error-message"></span>
                                </div>

                                <p class="booking-contact-note">Please provide at least one contact method (phone or email). Both are preferred.</p>
                            </div>

                            <div class="booking-form-actions">
                                <button type="button" class="booking-btn booking-btn-secondary" id="backToDateTime">Back</button>
                                <button type="button" class="booking-btn booking-btn-primary" id="continueToDetails">
                                    Continue to Event Details
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Step 3: Event Details -->
                    <div class="booking-form-step" id="step3">
                        <div class="booking-step-content">
                            <div class="booking-form-grid">
                                <div class="booking-form-group full-width">
                                    <label for="eventType">Event Type *</label>
                                    <select id="eventType" name="eventType" class="booking-form-input" required>
                                        <option value="">Select event type</option>
                                        <option value="Wedding">Wedding</option>
                                        <option value="Corporate Event">Corporate Event</option>
                                        <option value="Private Party">Private Party</option>
                                        <option value="Festival">Festival</option>
                                        <option value="Bar/Club">Bar/Club</option>
                                        <option value="Restaurant">Restaurant</option>
                                        <option value="Birthday Party">Birthday Party</option>
                                        <option value="Anniversary">Anniversary</option>
                                        <option value="Other">Other</option>
                                    </select>
                                    <span class="booking-error-message"></span>
                                </div>

                                <div class="booking-form-group full-width">
                                    <label for="venueName">Venue Name *</label>
                                    <input type="text" id="venueName" name="venueName" class="booking-form-input" placeholder="Grand Ballroom" required>
                                    <span class="booking-error-message"></span>
                                </div>

                                <div class="booking-form-group full-width">
                                    <label for="venueAddress">Venue Address *</label>
                                    <input type="text" id="venueAddress" name="venueAddress" class="booking-form-input" placeholder="123 Main St, City, State ZIP" required>
                                    <span class="booking-error-message"></span>
                                </div>

                                <div class="booking-form-group">
                                    <label for="expectedAttendance">Expected Attendance</label>
                                    <input type="number" id="expectedAttendance" name="expectedAttendance" class="booking-form-input" placeholder="100" min="1">
                                </div>

                                <div class="booking-form-group">
                                    <label for="budgetRange">Budget Range</label>
                                    <select id="budgetRange" name="budgetRange" class="booking-form-input">
                                        <option value="">Select budget range</option>
                                        <option value="Under $1,000">Under $1,000</option>
                                        <option value="$1,000 - $2,500">$1,000 - $2,500</option>
                                        <option value="$2,500 - $5,000">$2,500 - $5,000</option>
                                        <option value="$5,000+">$5,000+</option>
                                        <option value="Prefer to discuss">Prefer to discuss</option>
                                    </select>
                                </div>

                                <div class="booking-form-group">
                                    <label for="soundSystem">Sound System at Venue?</label>
                                    <select id="soundSystem" name="soundSystem" class="booking-form-input">
                                        <option value="Unknown">Unknown</option>
                                        <option value="Yes">Yes</option>
                                        <option value="No">No</option>
                                    </select>
                                </div>

                                <div class="booking-form-group">
                                    <label for="stageSize">Stage Size (if known)</label>
                                    <input type="text" id="stageSize" name="stageSize" class="booking-form-input" placeholder="e.g., 20ft x 15ft">
                                </div>

                                <div class="booking-form-group full-width">
                                    <label for="eventDescription">Event Description *</label>
                                    <textarea id="eventDescription" name="eventDescription" class="booking-form-input" rows="3" placeholder="Tell us about your event, music preferences, atmosphere, special requests, etc." required></textarea>
                                    <span class="booking-error-message"></span>
                                </div>

                                <div class="booking-form-group full-width">
                                    <label for="referralSource">How did you hear about us?</label>
                                    <select id="referralSource" name="referralSource" class="booking-form-input">
                                        <option value="">Select source</option>
                                        <option value="Google Search">Google Search</option>
                                        <option value="Instagram">Instagram</option>
                                        <option value="Facebook">Facebook</option>
                                        <option value="Friend/Family Referral">Friend/Family Referral</option>
                                        <option value="Venue Recommendation">Venue Recommendation</option>
                                        <option value="Saw you perform">Saw you perform</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                            </div>

                            <div class="booking-form-actions">
                                <button type="button" class="booking-btn booking-btn-secondary" id="backToContact">Back</button>
                                <button type="submit" class="booking-btn booking-btn-primary" id="submitBooking">
                                    <span class="booking-btn-text">Submit Booking Request</span>
                                    <span class="booking-btn-loading hidden">
                                        <div class="booking-spinner-small"></div>
                                        Submitting...
                                    </span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Success State -->
                    <div class="booking-success-state hidden" id="successState">
                        <div class="booking-success-content">
                            <div class="booking-success-icon">
                                <svg width="64" height="64" viewBox="0 0 64 64" fill="none"><circle cx="32" cy="32" r="32" fill="#61F457"/><path d="M20 32L28 40L44 24" stroke="#0a0a0a" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/></svg>
                            </div>
                            <h2>Booking Request Submitted!</h2>
                            <p class="booking-success-message">
                                We've received your booking request for <strong id="successEventType"></strong> on
                                <strong id="successDate"></strong> at <strong id="successTime"></strong>.
                            </p>
                            <p class="booking-success-note">We'll review your request and get back to you within 24 hours.</p>
                            <div class="booking-success-actions">
                                <button type="button" class="booking-btn booking-btn-primary" id="newBooking">Book Another Event</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Google Places API - Using secure backend proxy -->

    <!-- Inline Booking Form Script -->
    <script type="module">
    import { AVAILABILITY_CONFIG } from './booking/js/constants.js';
    import { apiClient } from './booking/js/api-client.js';
    import { CalendarRenderer } from './booking/js/calendar-renderer.js';
    import { formValidator } from './booking/js/form-validator.js';
    import { GooglePlacesAutocomplete } from './booking/js/google-places.js';
    import { formatPhoneNumber, formatTime, formatDate, formatMonthYear, dateToString } from './booking/js/utils.js';

    // Application State
    const state = {
        currentStep: 1,
        selectedDate: null,
        selectedDuration: null, // Will be set by user input
        selectedTime: null,
        timeSlots: [],
        isLoadingSlots: false,
    };

    // DOM Elements (using new booking- prefixed classes)
    const elements = {
        step1: document.getElementById('step1'),
        step2: document.getElementById('step2'),
        step3: document.getElementById('step3'),
        successState: document.getElementById('successState'),
        progressSteps: document.querySelectorAll('.booking-progress-steps .booking-step'),
        calendarDays: document.getElementById('calendarDays'),
        currentMonthLabel: document.getElementById('currentMonthLabel'),
        currentMonthBtn: document.getElementById('currentMonthBtn'),
        monthDropdown: document.getElementById('monthDropdown'),
        prevMonthBtn: document.getElementById('prevMonth'),
        nextMonthBtn: document.getElementById('nextMonth'),
        durationSection: document.getElementById('durationSection'),
        durationInput: document.getElementById('durationInput'),
        timeslotSection: document.getElementById('timeslotSection'),
        timeslotLoading: document.getElementById('timeslotLoading'),
        timeslotGrid: document.getElementById('timeslotGrid'),
        continueToContactBtn: document.getElementById('continueToContact'),
        continueToDetailsBtn: document.getElementById('continueToDetails'),
        backToDateTimeBtn: document.getElementById('backToDateTime'),
        backToContactBtn: document.getElementById('backToContact'),
        submitBtn: document.getElementById('submitBooking'),
        newBookingBtn: document.getElementById('newBooking'),
        form: document.getElementById('bookingForm'),
        contactName: document.getElementById('contactName'),
        contactPhone: document.getElementById('contactPhone'),
        contactEmail: document.getElementById('contactEmail'),
        eventType: document.getElementById('eventType'),
        venueName: document.getElementById('venueName'),
        venueAddress: document.getElementById('venueAddress'),
        expectedAttendance: document.getElementById('expectedAttendance'),
        budgetRange: document.getElementById('budgetRange'),
        soundSystem: document.getElementById('soundSystem'),
        stageSize: document.getElementById('stageSize'),
        eventDescription: document.getElementById('eventDescription'),
        referralSource: document.getElementById('referralSource'),
        successEventType: document.getElementById('successEventType'),
        successDate: document.getElementById('successDate'),
        successTime: document.getElementById('successTime'),
    };

    let calendar;
    let placesAutocomplete;

    async function initialize() {
        if (!elements.calendarDays) return; // Exit if booking section not present

        calendar = new CalendarRenderer(elements.calendarDays, {
            advanceMonths: AVAILABILITY_CONFIG.advanceBookingMonths,
            onDateSelect: handleDateSelect,
        });

        calendar.render();
        updateMonthLabel();
        updateMonthDropdown();
        updateNavButtons();

        try {
            placesAutocomplete = new GooglePlacesAutocomplete(elements.venueAddress);
            await placesAutocomplete.initialize();
        } catch (error) {
            console.error('Failed to initialize Google Places:', error);
        }

        attachEventListeners();
        console.log('Inline booking form initialized');
    }

    function attachEventListeners() {
        elements.prevMonthBtn?.addEventListener('click', () => {
            calendar.prevMonth();
            updateMonthLabel();
            updateNavButtons();
        });

        elements.nextMonthBtn?.addEventListener('click', () => {
            calendar.nextMonth();
            updateMonthLabel();
            updateNavButtons();
        });

        elements.currentMonthBtn?.addEventListener('click', () => {
            elements.monthDropdown.classList.toggle('hidden');
        });

        // Quick duration buttons
        document.querySelectorAll('.booking-duration-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const duration = parseFloat(btn.dataset.duration);

                // Update button states
                document.querySelectorAll('.booking-duration-btn').forEach(b => b.classList.remove('selected'));
                btn.classList.add('selected');

                // Clear custom input
                if (elements.durationInput) {
                    elements.durationInput.value = '';
                }

                handleDurationSelect(duration);
            });
        });

        elements.durationInput?.addEventListener('input', (e) => {
            const duration = parseFloat(e.target.value);
            const inputWrapper = e.target.parentElement;

            // Clear quick button selection when typing custom value
            document.querySelectorAll('.booking-duration-btn').forEach(b => b.classList.remove('selected'));

            inputWrapper.classList.remove('error');

            if (e.target.value === '') {
                state.selectedDuration = null;
                elements.timeslotSection.classList.add('hidden');
                updateContinueButton();
            } else if (duration >= 1 && duration <= 12) {
                handleDurationSelect(duration);
            } else {
                inputWrapper.classList.add('error');
                state.selectedDuration = null;
                elements.timeslotSection.classList.add('hidden');
                updateContinueButton();
            }
        });

        elements.contactPhone?.addEventListener('input', (e) => {
            e.target.value = formatPhoneNumber(e.target.value);
        });

        elements.continueToContactBtn?.addEventListener('click', () => goToStep(2));
        elements.continueToDetailsBtn?.addEventListener('click', () => {
            if (validateContactStep()) {
                goToStep(3);
            }
        });
        elements.backToDateTimeBtn?.addEventListener('click', () => goToStep(1));
        elements.backToContactBtn?.addEventListener('click', () => goToStep(2));
        elements.newBookingBtn?.addEventListener('click', resetForm);
        elements.form?.addEventListener('submit', handleSubmit);
    }

    function validateContactStep() {
        const name = elements.contactName.value.trim();
        const phone = elements.contactPhone.value.trim();
        const email = elements.contactEmail.value.trim();

        let isValid = true;

        // Clear previous errors
        elements.contactName.parentElement.querySelector('.booking-error-message').textContent = '';
        elements.contactPhone.parentElement.querySelector('.booking-error-message').textContent = '';
        elements.contactEmail.parentElement.querySelector('.booking-error-message').textContent = '';

        // Name is required
        if (!name) {
            elements.contactName.parentElement.querySelector('.booking-error-message').textContent = 'Name is required';
            isValid = false;
        }

        // At least one contact method required
        if (!phone && !email) {
            elements.contactPhone.parentElement.querySelector('.booking-error-message').textContent = 'Please provide phone or email';
            isValid = false;
        }

        // Validate email format if provided
        if (email && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
            elements.contactEmail.parentElement.querySelector('.booking-error-message').textContent = 'Invalid email format';
            isValid = false;
        }

        return isValid;
    }

    function updateMonthLabel() {
        const month = calendar.getCurrentMonth();
        elements.currentMonthLabel.textContent = formatMonthYear(month);
    }

    function updateMonthDropdown() {
        const months = calendar.getAvailableMonths();
        const currentMonth = calendar.getCurrentMonth();

        const html = months.map(month => {
            const isActive = month.getTime() === currentMonth.getTime();
            return `<div class="booking-month-option ${isActive ? 'active' : ''}" data-month="${month.toISOString()}">${formatMonthYear(month)}</div>`;
        }).join('');

        elements.monthDropdown.innerHTML = html;

        elements.monthDropdown.querySelectorAll('.booking-month-option').forEach(option => {
            option.addEventListener('click', () => {
                const month = new Date(option.dataset.month);
                calendar.goToMonth(month);
                updateMonthLabel();
                updateNavButtons();
                elements.monthDropdown.classList.add('hidden');
            });
        });
    }

    function updateNavButtons() {
        const availableMonths = calendar.getAvailableMonths();
        const currentMonth = calendar.getCurrentMonth();
        const currentIndex = availableMonths.findIndex(m => m.getTime() === currentMonth.getTime());
        elements.prevMonthBtn.disabled = currentIndex === 0;
        elements.nextMonthBtn.disabled = currentIndex === availableMonths.length - 1;
    }

    function handleDateSelect(date) {
        state.selectedDate = date;
        elements.durationSection.classList.remove('hidden');

        // Hide time slots until duration is entered
        elements.timeslotSection.classList.add('hidden');
        state.selectedTime = null;

        // Only fetch slots if duration is already entered and valid
        if (state.selectedDuration && state.selectedDuration >= 1 && state.selectedDuration <= 12) {
            fetchTimeSlots();
        }

        updateContinueButton();
    }

    function handleDurationSelect(hours) {
        state.selectedDuration = hours;
        if (state.selectedDate) fetchTimeSlots();
        updateContinueButton();
    }

    async function fetchTimeSlots() {
        if (!state.selectedDate || !state.selectedDuration) return;

        state.isLoadingSlots = true;
        elements.timeslotSection.classList.remove('hidden');
        elements.timeslotLoading.classList.remove('hidden');
        elements.timeslotGrid.innerHTML = '';

        try {
            const dateStr = dateToString(state.selectedDate);
            const data = await apiClient.getAvailability(dateStr, state.selectedDuration);
            state.timeSlots = data.slots;
            renderTimeSlots();
        } catch (error) {
            console.error('Error fetching time slots:', error);
            elements.timeslotGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 2rem; color: rgba(255,255,255,0.6);">Failed to load available times. Please try again.</div>';
        } finally {
            state.isLoadingSlots = false;
            elements.timeslotLoading.classList.add('hidden');
        }
    }

    function renderTimeSlots() {
        const html = state.timeSlots.map(slot => {
            const classes = ['booking-timeslot-btn'];
            if (slot.available) classes.push('available');
            if (!slot.available) classes.push('unavailable');
            if (state.selectedTime === slot.start) classes.push('selected');
            return `<button type="button" class="${classes.join(' ')}" data-time="${slot.start}" ${!slot.available ? 'disabled' : ''}>${formatTime(slot.start)}</button>`;
        }).join('');

        elements.timeslotGrid.innerHTML = html;
        elements.timeslotGrid.querySelectorAll('.booking-timeslot-btn.available').forEach(btn => {
            btn.addEventListener('click', () => handleTimeSelect(btn.dataset.time));
        });
    }

    function handleTimeSelect(time) {
        state.selectedTime = time;
        renderTimeSlots();
        updateContinueButton();
    }

    function updateContinueButton() {
        const isValid = state.selectedDate && state.selectedDuration && state.selectedTime;
        elements.continueToContactBtn.disabled = !isValid;
    }

    function goToStep(step) {
        state.currentStep = step;
        elements.step1.classList.remove('active');
        elements.step2.classList.remove('active');
        elements.step3.classList.remove('active');
        if (step === 1) elements.step1.classList.add('active');
        else if (step === 2) elements.step2.classList.add('active');
        else if (step === 3) elements.step3.classList.add('active');

        elements.progressSteps.forEach((stepEl, index) => {
            if (index < step) stepEl.classList.add('active');
            else stepEl.classList.remove('active');
        });

        document.getElementById('booking').scrollIntoView({ behavior: 'smooth' });
    }

    async function handleSubmit(e) {
        e.preventDefault();

        const formData = {
            date: dateToString(state.selectedDate),
            time: state.selectedTime,
            duration: state.selectedDuration,
            contactName: elements.contactName.value.trim(),
            contactPhone: elements.contactPhone.value.trim(),
            contactEmail: elements.contactEmail.value.trim(),
            eventType: elements.eventType.value,
            venueName: elements.venueName.value.trim(),
            venueAddress: elements.venueAddress.value.trim(),
            expectedAttendance: elements.expectedAttendance.value || null,
            budgetRange: elements.budgetRange.value || null,
            soundSystem: elements.soundSystem.value || 'Unknown',
            stageSize: elements.stageSize.value.trim() || null,
            eventDescription: elements.eventDescription.value.trim(),
            referralSource: elements.referralSource.value || null,
        };

        const validation = formValidator.validate(formData);
        if (!validation.isValid) {
            formValidator.displayErrors(validation.errors);
            return;
        }

        formValidator.clearErrors();

        const submitBtnText = elements.submitBtn.querySelector('.booking-btn-text');
        const submitBtnLoading = elements.submitBtn.querySelector('.booking-btn-loading');
        submitBtnText.classList.add('hidden');
        submitBtnLoading.classList.remove('hidden');
        elements.submitBtn.disabled = true;

        try {
            await apiClient.createBooking(formData);
            showSuccessState(formData);
        } catch (error) {
            console.error('Booking error:', error);
            alert(error.message || 'Failed to submit booking. Please try again.');
            submitBtnText.classList.remove('hidden');
            submitBtnLoading.classList.add('hidden');
            elements.submitBtn.disabled = false;
        }
    }

    function showSuccessState(formData) {
        elements.step1.classList.remove('active');
        elements.step2.classList.remove('active');
        elements.step3.classList.remove('active');
        elements.successState.classList.remove('hidden');
        elements.successEventType.textContent = formData.eventType;
        elements.successDate.textContent = formatDate(state.selectedDate);
        elements.successTime.textContent = formatTime(state.selectedTime);
        document.getElementById('booking').scrollIntoView({ behavior: 'smooth' });
    }

    function resetForm() {
        state.currentStep = 1;
        state.selectedDate = null;
        state.selectedDuration = null;
        state.selectedTime = null;
        state.timeSlots = [];
        elements.form.reset();
        elements.durationSection.classList.add('hidden');
        elements.timeslotSection.classList.add('hidden');
        elements.successState.classList.add('hidden');
        if (elements.durationInput) elements.durationInput.value = '';
        document.querySelectorAll('.booking-duration-btn').forEach(b => b.classList.remove('selected'));
        goToStep(1);
        calendar.selectedDate = null;
        calendar.render();
        formValidator.clearErrors();
    }

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initialize);
    } else {
        initialize();
    }
    </script>

    <footer class="footer">
    <!-- Main footer content in grid -->
    <div class="footer-content">
        <!-- Brand Column -->
        <div class="footer-brand">
            <div class="footer-logo">
                <img src="images/logo.png" alt="The Box Logo" class="logo-img">
            </div>
            <p class="footer-tagline">Fresno's Ultimate Throwback Party Band</p>
        </div>

        <!-- Links Column -->
        <div class="footer-links-col">
            <h3 class="links-heading">Quick Links</h3>
            <ul class="footer-links-list">
                <li><a href="#hero" class="footer-link">Home</a></li>
                <li><a href="#tour" class="footer-link">Gigs</a></li>
                <li><a href="#about" class="footer-link">About</a></li>
                <li><a href="#music" class="footer-link">Music</a></li>
                <li><a href="#members" class="footer-link">Members</a></li>
                <li><a href="#booking" class="footer-link">Booking</a></li>
            </ul>
        </div>

        <!-- Social Column -->
        <div class="footer-social-col">
            <h3 class="social-heading">Connect With Us</h3>
            <div class="social-links">
                <a href="https://www.instagram.com/theboxband/" class="social-link" aria-label="Instagram" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-instagram"></i>
                </a>
                <a href="https://www.facebook.com/TheBOX559/" class="social-link" aria-label="Facebook" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-facebook-f"></i>
                </a>
                <a href="https://youtube.com/@yourchannel" class="social-link" aria-label="YouTube" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-youtube"></i>
                </a>
                <a href="https://open.spotify.com/artist/yourartistid" class="social-link" aria-label="Spotify" target="_blank" rel="noopener noreferrer">
                    <i class="fab fa-spotify"></i>
                </a>
            </div>
        </div>
    </div>

    <!-- Full width footer bottom -->
    <div class="footer-bottom">
        <div class="footer-bottom-container">
            <div class="copyright">© <span id="current-year">2023</span> The Box. All Rights Reserved.</div>
            <div class="footer-credits">Made with <i class="fas fa-heart pulse"></i> in Fresno</div>
        </div>
    </div>
</footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script src="script.js"></script>
</body>
</html>